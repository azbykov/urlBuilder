function urlBuilder(a,b){var c,d,e,f={},g=0,h=b&&"get"===b?b:"default",i="get"===h?"?":"/",j="get"===h?"=":"/",k="get"===h?"&":"/",l=function(a){var c;if("get"===b){var g,h=a[a.length-1].split("?");for(d&&d!==h[0]?e=h[0]:d=h[0],h=h[1]?h[1].split("&"):[],c=0;c<h.length;c++)g=h[c].split("="),f[g[0]]=g[1]}else for(c=3;c<a.length;c+=2)f[a[c]]=a[c+1]},m=function(){var a,b=0;for(a in f)f.hasOwnProperty(a)&&a.length>0&&b++;return b},n=function(a){var b=a.replace("http://",""),f=b.split("/");c=f[0],d=void 0!==f[1]&&f[1].length>0?f[1]:!1,e=void 0!==f[2]&&f[2].length>0?f[2]:!1,l(f),g=m()};a&&n(a);var o=function(){var a,b=g>0?i:"",c=1;for(a in f)""!==a&&void 0!==a&&(b+=a+j+f[a],b+=g>c?k:"",c++);return b};return{setDomain:function(a){return c=a,this},getDomain:function(){return c},setController:function(a){return d=a,this},getController:function(){return d},getParams:function(){return 1===arguments.length?f[arguments[0]]:f},setParams:function(){if("object"==typeof arguments[0])f=arguments[0];else for(var a=0;a<arguments.length;a++)f[arguments[a]]=arguments[++a];return g=m(),this},getParamsCount:function(){return g},setUrl:function(a){return n(a),this},getUrl:function(a){var b="/";return a&&(b="http://"+c+"/"),b+=!1!==d?d:"",b+=!1!==e?"/"+e:"",b+=o()}}}